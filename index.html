<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Trials in Tainted Space Save Editor</title>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://kit.fontawesome.com/f5341e91eb.js"></script>
    <script type="text/javascript" src="scripts/filesaver.js"></script>
    <script type="text/javascript" src="scripts/ko.js"></script>
    <script type="text/javascript" src="scripts/ko-mapping.js"></script>
    <script type="text/javascript" src="scripts/util.js"></script>
    <!--<script type="text/javascript" src="scripts/util.js"></script>-->
    <script type="text/javascript" src="ui/input.js"></script>
    <script type="text/javascript" src="ui/layout.js"></script>
    <script type="text/javascript" src="data/global.js"></script>
    <script type="text/javascript" src="data/vm.js"></script>
    <script type="text/javascript" src="data/perks.js"></script>
    <script type="text/javascript" src="data/flags.js"></script>
    <script type="text/javascript" src="data/classes.js"></script>

    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap-mod.css" />
    <link type="text/css" rel="stylesheet" href="styles/main.css" />

    <style>
    </style>

    <script>
        //in case they switch to using a custom extension at some point like they do with coc2
        const fileExtension = '.json';

        $(() => {
            $('#toolbarContainer').collapse();
            $('#toolbarContainer').show();

            $('#btnDisclaimer').on('click', () => {
                $('#disclaimer').hide();
                doLoad();
            });
        });

        function doLoad() {
            $('#loadFile').attr('accept', fileExtension);

            //$('#editField-character').on('change', function () {
            //    const key = $(this).val();
            //    save.character = {
            //        obj: save.saveObj.characters[key],
            //        key: key
            //    };
            //    //$('.nav-tabs button:first').tab('show'); //this might be annoying
            //});

            // #region File handling
            $('body').on('dragenter dragleave dragover', (e) => {
                e.preventDefault();
                e.stopPropagation();
            });
            $('body').on('drop', (e) => {
                e.preventDefault();
                e.stopPropagation();

                if (!e.dataTransfer || !e.dataTransfer.files || e.dataTransfer.files.length == 0) {
                    alert('Error loading dropped file, please try again.');
                }
                else {
                    const file = e.dataTransfer.files[0];
                    loadFile(file);
                }
            });

            function loadFile(file) {
                if (file.name.endsWith(fileExtension)) {
                    try {
                        var fileReader = new FileReader();
                        fileReader.readAsText(file);

                        fileReader.addEventListener("loadend", () => {
                            var json;

                            if (typeof fileReader.result !== 'string') {
                                alert('This file has an incorrect format, please check the file and try again.');
                                return;
                            }

                            try {
                                json = JSON.parse(fileReader.result);
                                if (!json['classInstance']) { //this check should be enough for now
                                    alert('This file is in an incorrect format, please check the file and try again.');
                                    return;
                                }
                            }
                            catch (e) {
                                alert("An error ocurred while attempting parse the file\n\n" + e);
                                return;
                            }

                            // this might be annoying
                            //$('.nav-tabs button:first').tab('show');
                            //window.scrollTo({
                            //    top: 0,
                            //    left: 0,
                            //    behavior: 'smooth'
                            //})


                            //window.vm && vm.isLoading(true);

                            try {
                                if (!window.vm) {
                                    window.vm = new ViewModel(json);
                                    ko.applyBindings(vm);
                                }
                                else {
                                    ko.mapping.fromJS(json, vm);
                                }

                                vm.isEnabled(true);
                            } catch (e) {
                                alert('An error ocurred while binding the data.\n\n' + e);
                            }

                            //window.vm && vm.isLoading(false);

                            $('#saveFile').attr('disabled', false);
                            $('#saveName').attr('disabled', false);
                            //$('#saveName').val(save.saveFile.name);
                            alert("Save file loaded!");
                        });


                    } catch (e) {
                        alert('Error reading file\n' + e)
                    }
                }
                else {
                    alert('Selected file is invalid, please select a ' + fileExtension + ' file and try again');
                }
            }

            $('#loadFile').on('change', () => {
                const input = $('#loadFile');
                var file = input.prop('files')[0];
                if (!file) {
                    alert('Error loading the file, please try again.');
                }
                else {
                    loadFile(file);
                }
            });

            $('#saveName').on('focus', () => {
                const input = $('#saveName');
                const val = input.val();
                if (val.lastIndexOf(fileExtension) == val.length - 5) {
                    input.val(val.substring(0, val.lastIndexOf(fileExtension)));
                }
            });

            $('#saveName').on('blur', () => {
                const input = $('#saveName');
                const requiredLength = 1;
                const val = input.val();
                if (val.length >= requiredLength) {
                    input.val(val + fileExtension);
                }
                else {
                    //input.val(save.saveFile.name + fileExtension);
                    alert('File name must be ' + requiredLength + ' character' + (requiredLength > 1 ? 's' : '') + ' or longer');
                }
            });

            $('#saveFile').on('click', () => {
                var mapping = {
                    'ignore': ["selectedCharacter", "chars", "isPC", "getGlobal", "internal_perks", "hasPerk", "perksFromData",
                        "isEnabled", "nameChanged", "validateNumberInput", "emailChanged", "getPenisName", "getVaginaName", "getBreastName"]
                }

                //const blob = new Blob([ko.toJSON(vm, mapping)], { type: 'text/json' });
                const blob = new Blob([ko.mapping.toJSON(vm, mapping)], { type: 'text/json' });
                var fileName = $('#saveName').val();
                if (!fileName) {
                    fileName = "unnamed" + fileExtension;
                }
                saveAs(blob, fileName);
            });
            // #endregion

            // #region UI
            const instance = 'gameInstanceInfo';
            const char = 'selectedCharacter().obj';
            const pc = 'characters.PC';
            const butt = char + '.ass';
            const flags = 'flags';

            // #region Game
            $('#tabGame').append(new Tab([
                new Row([
                    new Group('Internal', [
                        new TextField(flags, 'PC_EMAIL_ADDRESS', 'E-Mail', null, 'emailChanged'),
                        new TextField(instance, 'note', 'Note'),
                        new IntegerField('', 'days', 'Days', 'days', 0),
                        new IntegerField('', 'hours', 'Hours', 'hours', 0, 23),
                        new IntegerField('', 'minutes', 'Minutes', 'minutes', 0, 59),
                        //rr
                    ]),
                    new Group('Game Settings', [
                        new SwitchField('', 'easyMode', 'Easy Mode'),
                        new SwitchField('', 'sillyMode', 'Silly Mode'),
                        new SwitchField(instance, 'miniMapVisible', 'Minimap visible'),
                        new SwitchField(instance, 'minimapRolledOut', 'Minimap rolled out'),
                        new SwitchField(instance, 'bustRolledOut', 'Bust rolled out'),
                        new SwitchField(instance, 'dateTimeVisible', 'Date and Time visible')
                    ])
                ])
            ]));
            // #endregion

            // #region Stats
            $('#tabStats').append(new Tab([
                new Row([
                    new Group('General', [
                        new TextField(char, 'short', 'Name', null, 'nameChanged'),
                        new IntegerField(char, 'credits', 'Credits', null, 0),
                        new IntegerField(char, 'personality', 'Personality', null, 0, 100),
                        new IntegerField(char, 'exhibitionismRaw', 'Exhibitionism', null, 0, 100)
                    ]),
                    new Group('Advancement', [
                        new IntegerField(char, 'level', 'Level', null, 0, 10),
                        //new IntegerField(char, 'XPRaw', 'XP', null, 0, null, null, true),
                        new IntegerField(pc, 'XPRaw', 'XP', null, 0, null, null, true),
                        //new IntegerField(char, 'unspentStatPoints', 'Stat Points', null, 0, null, null, true)
                        new IntegerField(pc, 'unspentStatPoints', 'Stat Points', null, 0, null, null, true)
                    ]),
                    new Group('Appearance', [
                        new IntegerField(char, 'tallness', 'Height', 'inches', 0),
                        new IntegerField(char, 'thickness', 'Thickness', null, 0, 100),
                        new IntegerField(char, 'tone', 'Tone', null, 0, 100),
                        new IntegerField(char, 'femininity', 'Femininity', null, 0, 100)
                    ]),
                ]),
                new Row([
                    new Group('Core', [
                        new NestedGroup('', [
                            new FloatField(char, 'Internal_aimRaw', 'Aim Raw', null, 0),
                            new IntegerField(char, 'aimMod', 'Aim Mod', null, 0),
                        ]),
                        new NestedGroup('', [
                            new FloatField(char, 'Internal_intelligenceRaw', 'Intelligence Raw', null, 0),
                            new IntegerField(char, 'intelligenceMod', 'Intelligence Mod', null, 0),
                        ]),
                        new NestedGroup('', [
                            new FloatField(char, 'Internal_physiqueRaw', 'Physique Raw', null, 0),
                            new IntegerField(char, 'physiqueMod', 'Physique Mod', null, 0),
                        ]),
                        new NestedGroup('', [
                            new FloatField(char, 'Internal_reflexesRaw', 'Reflexes Raw', null, 0),
                            new IntegerField(char, 'reflexesMod', 'Reflexes Mod', null, 0),
                        ]),
                        new NestedGroup('', [
                            new FloatField(char, 'Internal_willpowerRaw', 'Willpower Raw', null, 0),
                            new IntegerField(char, 'willpowerMod', 'Willpower Mod', null, 0),
                        ]),
                        new NestedGroup('', [
                            new FloatField(char, 'Internal_libidoRaw', 'Libido Raw', null, 0, 100),
                            new IntegerField(char, 'libidoMod', 'Libido Mod', null, 0, 100),
                        ]),
                        new NestedGroup('', [
                            new FloatField(char, 'Internal_taintRaw', 'Taint Raw', null, 0, 100),
                            new IntegerField(char, 'taintMod', 'Taint Mod', null, 0, 100)
                        ])
                    ]),
                    new Group('Combat', [
                        new NestedGroup('', [
                            new IntegerField(char, 'HPRaw', 'HP Raw', null, 0),
                            new IntegerField(char, 'HPMod', 'HP Mod', null, 0)
                        ]),
                        new NestedGroup('', [
                            new IntegerField(char, 'energyRaw', 'Energy Raw', null, 0),
                            new IntegerField(char, 'energyMod', 'Energy Mod', null, 0)
                        ]),
                        new NestedGroup('', [
                            new IntegerField(char, 'lustRaw', 'Lust Raw', null, 0, 100),
                            new IntegerField(char, 'lustMod', 'Lust Mod', null, 0)
                        ]),
                        new IntegerField(char, 'shieldsRaw', 'Shields Raw', null, 0)
                    ]),
                ]),
            ]));
            // #endregion

            // #region Head
            $('#tabHead').append(new Tab([
                new Row([
                    new Group('Head', [
                        new SelectField('ValidTypes.Antennae', char, 'antennaeType', 'Antennae Type'),
                        new IntegerField(char, 'antennae', 'Antennae Count', null, 0),
                        new SelectField('ValidTypes.Horn', char, 'hornType', 'Horn Type'),
                        new IntegerField(char, 'horns', 'Horn Count', null, 0),
                        new FloatField(char, 'hornLength', 'Horn Length', 'inches', 0)
                    ]),
                    new Group('Hair', [
                        new SelectField('HairType', char, 'hairType', 'Hair Type'),
                        new FloatField(char, 'hairLength', 'Hair Length', 'inches', 0),
                        new TextField(char, 'hairColor', 'Hair Color'),
                        // todo hair style
                        new FloatField(char, 'beardLength', 'Beard Length', 'inches', 0),
                        new SelectField('HairType', char, 'beardType', 'Beard Type'),
                        // todo beard style
                    ])
                ]),
                new Row([
                    new Group('Face', [
                        new SelectField('ValidTypes.Face', char, 'faceType', 'Face Type'),
                        new FlagField('ValidFlags.Face', char, 'faceFlags', 'Face Flags')
                    ]),
                    new Group('Tongue', [
                        new SelectField('ValidTypes.Tongue', char, 'tongueType', 'Tongue Type'),
                        new FlagField('ValidFlags.Tongue', char, 'tongueFlags', 'Tongue Flags')
                    ])
                ]),
                new Row([
                    new Group('Lips', [
                        new TextField(char, 'lipColor', 'Lip Color'),
                        new IntegerField(char, 'lipMod', 'Lip Mod', null, 0)
                    ]),
                    new Group('Ears', [
                        new SelectField('ValidTypes.Ear', char, 'earType', 'Ear Type'),
                        new FloatField(char, 'earLength', 'Ear Length', 'inches', 0),
                        //find ear flags
                        //new FlagField(globalKeys.ValidFlags.Ear, new Binding('earFlags'), 'Ear Flags'),
                    ]),
                    new Group('Eyes', [
                        new SelectField('ValidTypes.Eye', char, 'eyeType', 'Eye Type'),
                        new TextField(char, 'eyeColor', 'Eye Color')
                    ])
                ])
            ]));
            // #endregion

            // #region Body
            $('#tabBody').append(new Tab([
                new Row([
                    new Group('General', [
                        new SwitchField(char, 'gills', 'Has Gills'),
                        new FloatField(char, 'elasticity', 'Elasticity', null, 0),
                        new SelectField('GenitalSpot', char, 'genitalSpot', 'Genital Spot'),
                        new NestedGroup('', [
                            new IntegerField(char, 'hipRatingRaw', 'Hip Rating Raw', null, 0),
                            new IntegerField(char, 'hipRatingMod', 'Hip Rating Mod', null, 0),
                        ]),
                        new NestedGroup('', [
                            new IntegerField(char, 'buttRatingRaw', 'Butt Rating Raw', null, 0),
                            new IntegerField(char, 'buttRatingMod', 'Butt Rating Mod', null, 0)
                        ]),
                        new NestedGroup('', [
                            new IntegerField(char, 'bellyRatingRaw', 'Belly Rating Raw', null, 0),
                            new IntegerField(char, 'bellyRatingMod', 'Belly Rating Mod', null, 0)
                        ])
                    ]),
                    new Group('Skin', [
                        new SelectField('SkinType', char, 'skinType', 'Skin Type'),
                        new TextField(char, 'skinTone', 'Skin Tone'),
                        new TextField(char, 'skinAccent', 'Skin Accent'),
                        new TextField(char, 'furColor', 'Fur Color'),
                        new TextField(char, 'scaleColor', 'Scale Color'),
                        //find skin flags
                        //new FlagField(globalKeys.ValidFlags.Skin, new Binding('skinFlags'), 'Skin Flags')
                    ])
                ]),
                new Row([
                    new Group('Wings', [
                        new SelectField('ValidTypes.Wing', char, 'wingType', 'Wing Type'),
                        new IntegerField(char, 'wingCount', 'Wing Count', null, 0)
                    ]),
                    new Group('Arms', [
                        new SelectField('ValidTypes.Arm', char, 'armType', 'Arm Type'),
                        new FlagField('ValidFlags.Arm', char, 'armFlags', 'Arm Flags')
                    ]),
                    new Group('Legs', [
                        new SelectField('ValidTypes.Leg', char, 'legType', 'Leg Type'),
                        new IntegerField(char, 'legCount', 'Leg Count', null, 0),
                        new FlagField('ValidFlags.Leg', char, 'legFlags', 'Leg Flags')
                    ])
                ]),
                new Row([
                    new Group('Butt', [
                        //todo virgin
                        new IntegerField(butt, 'minLooseness', 'Min Looseness', null, 0),
                        new IntegerField(butt, 'bonusCapacity', 'Bonus Capacity', null, 0),
                        //find ass flags
                        //new FlagField(globalKeys.ValidFlags.Ass, new Binding('flags', 'ass'), 'Ass Flags'),
                        new NestedGroup('', [
                            new IntegerField(butt, 'loosenessRaw', 'Looseness Raw', null, 0),
                            new IntegerField(butt, 'loosenessMod', 'Looseness Mod', null, 0)
                        ]),
                        new NestedGroup('', [
                            new IntegerField(butt, 'wetnessRaw', 'Wetness Raw', null, 0),
                            new IntegerField(butt, 'wetnessMod', 'Wetness Mod', null, 0)
                        ])
                    ]),
                    new Group('Tail', [
                        new SelectField('ValidTypes.Tail', char, 'tailType', 'Tail Type'),
                        new IntegerField(char, 'tailCount', 'Tail Count', null, 0),
                        new IntegerField(char, 'tailVenom', 'Tail Venom', null, 0, 100),
                        new IntegerField(char, 'tailRecharge', 'Tail Recharge', null, 0),
                        new SelectField('TailGenital', char, 'tailGenital', 'Tail Genital Type'),
                        // find tail arg
                        //new SelectField(globalKeys.TailGenital, char, 'tailGenital', ValueType.Integer), 'Tail Genital Type'),
                        new TextField(char, 'tailGenitalColor', 'Tail Genital Color'),
                        new FlagField('ValidFlags.Tail', char, 'tailFlags', 'Tail Flags')
                    ])
                ]),
                new Row([
                    new Group('Milk', [
                        new SelectField('FluidType', char, 'milkType', 'Milk Type'),
                        new FloatField(char, 'milkFullness', 'Milk Fullness', null, 0),
                        new IntegerField(char, 'milkRate', 'Milk Rate', null, 0),
                        new IntegerField(char, 'milkMultiplier', 'Milk Multiplier', null, 0),
                        new IntegerField(char, 'milkStorageMultiplier', 'Milk Storage Multiplier', null, 0)
                    ]),
                    new Group('Nipples', [
                        new TextField(char, 'nippleColor', 'Nipple Color'),
                        new IntegerField(char, 'nipplesPerBreast', 'Nipples Per Breast', null, 0),
                        new FloatField(char, 'nippleLengthRatio', 'Nipple Length Ratio', null, 0),
                        new FloatField(char, 'nippleWidthRatio', 'Nipple Width Ratio', null, 0),
                        //find dicknipple type
                        //new SelectField(globalKeys.ValidTypes.Dicknipple, char, 'dickNippleType', ValueType.Integer), 'Dick Nipple Type'),
                        new IntegerField(char, 'dickNippleMultiplier', 'Dick Nipple Multiplier', null, 0)
                    ]),
                    new ArrayGroup('Breasts', 'addBreastRow', [
                        new ArrayField(char, 'breastRows()', 'getBreastName', 'removeBreastRow', [
                            new IntegerField('', 'breasts', 'Count', null, 0),
                            new IntegerField('', 'breastRatingRaw', 'Rating Raw', null, 0),
                            new IntegerField('', 'breastRatingMod', 'Rating Mod', null, 0),
                            new IntegerField('', 'breastRatingLactationMod', 'Lactation Mod', null, 0),
                            new IntegerField('', 'breastRatingHoneypotMod', 'Honeypot Mod', null, 0),
                            new SelectField('NippleType', '', 'nippleType', 'Nipple Type'),
                            new FloatField('', 'fullness', 'Fullness', null, 0),
                            new FlagField('areola', '', 'areolaFlags', 'Areola Flags')
                        ])
                        //todo figure out breasts
                    ])
                ])
            ]));
            // #endregion

            // #region Crotch
            $('#tabCrotch').append(new Tab([
                // todo multiple array thingy
                new Row([
                    new Group('Male Organs', [
                        new IntegerField(char, 'balls', 'Balls', null, 0),
                        new NestedGroup('', [
                            new FloatField(char, 'ballSizeRaw', 'Ball Size Raw', null, 0),
                            new IntegerField(char, 'ballSizeMod', 'Ball Size Mod', null, 0)
                        ]),
                        new FloatField(char, 'ballFullness', 'Ball Fullness', null, 0, 100),
                        new FloatField(char, 'ballEfficiency', 'Ball Efficiency', null, 0),
                        new FloatField(char, 'refractoryRate', 'Refractory Rate', null, 0),
                        new SelectField('FluidType', char, 'cumType', 'Cum Type'),
                        new NestedGroup('', [
                            new FloatField(char, 'cumMultiplierRaw', 'Cum Multiplier Raw', null, 0),
                            new IntegerField(char, 'cumMultiplierMod', 'Cum Multiplier Raw', null, 0)
                        ]),
                        new NestedGroup('', [
                            new FloatField(char, 'cumQualityRaw', 'Cum Quality Raw', null, 0),
                            new IntegerField(char, 'cumQualityMod', 'Cum Quality Mod', null, 0)
                        ]),
                        new SwitchField(char, 'cockVirgin', 'Cock Virgin')
                    ]),
                    new ArrayGroup('Penises', 'addPenis', [
                        new ArrayField(char, 'cocks()', 'getPenisName', 'removePenis', [
                            new NestedGroup('', [
                                new FloatField('', 'cLengthRaw', 'Length Raw', null, 0),
                                new FloatField('', 'cLengthMod', 'Length Mod', null, 0),
                            ]),
                            new NestedGroup('', [
                                new FloatField('', 'cThicknessRatioRaw', 'Thickness Ratio Raw', null, 0),
                                new FloatField('', 'cThicknessRatioMod', 'Thickness Ratio Mod', null, 0),
                            ]),
                            new SelectField('BodyType', '', 'cType', 'Type'),
                            new TextField('', 'cockColor', 'Color'),
                            new FloatField('', 'knotMultiplier', 'Knot Multiplier', null, 0),
                            new FloatField('', 'flaccidMultiplier', 'Flaccid Multiplier', null, 0),
                            new SwitchField('', 'virgin', 'Virgin'),
                            new FlagField('BodyFlag', '', 'flags', 'Flags') //todo flags
                            //todo piercing
                        ])
                    ])
                ]),
                new Row([
                    new Group('Female Organs', [
                        new NestedGroup('', [
                            new FloatField(char, 'fertilityRaw', 'Fertility Raw', null, 0),
                            new IntegerField(char, 'fertilityMod', 'Fertility Mod', null, 0)
                        ]),
                        new SelectField('FluidType', char, 'girlCumType', 'Cum Type'),
                        new NestedGroup('', [
                            new FloatField(char, 'girlCumMultiplierRaw', 'Cum Multiplier Raw', null, 0),
                            new IntegerField(char, 'girlCumMultiplierMod', 'Cum Multiplier Mod', null, 0)
                        ]),
                        new FloatField(char, 'clitLength', 'Clit Length', null, 0),
                        new SwitchField(char, 'vaginalVirgin', 'Vaginal Virgin')
                    ]),
                    new ArrayGroup('Vaginas', 'addVagina', [
                        new ArrayField(char, 'vaginas()', 'getVaginaName', 'removeVagina', [
                            new IntegerField('', 'minLooseness', 'Min Looseness', null, 0),
                            new NestedGroup('', [
                                new IntegerField('', 'loosenessRaw', 'Looseness Raw', null, 0),
                                new IntegerField('', 'loosenessMod', 'Looseness Mod', null, 0)
                            ]),
                            new NestedGroup('', [
                                new IntegerField('', 'wetnessRaw', 'Wetness Raw', null, 0),
                                new IntegerField('', 'wetnessMod', 'Wetness Mod', null, 0)
                            ]),
                            new IntegerField('', 'bonusCapacity', 'Bonus Capacity', null, 0),
                            new SelectField('BodyType', '', 'type', 'Type'),
                            new TextField('', 'vaginaColor', 'Color'),
                            new IntegerField('', 'clits', 'Clits', null, 1),
                            new FloatField('', 'fullness', 'Fullness', null, 0),
                            new IntegerField('', 'shrinkCounter', 'Shrink Counter', null, 0),
                            new SwitchField('', 'hymen', 'Hymen'),
                            new FlagField('BodyFlag', '', 'flags', 'Flags') //todo flags
                            //todo piercing
                        ])
                    ]),
                ])
            ]));
            // #endregion

            // #region Perks
            $('#tabPerks').append(
                //document.createElement('p').textContent = 'Needs serious ui work but works behind the scenes (fyi if you use this in its current state some perks will disappear after removed)',
                new PerkField(char, 'perks')
            );
            // #endregion

            // #region Flags
            $('#tabFlags').append(
                document.createElement('p').textContent = 'as you can probably tell, this has horrible performance',
                new FlagContainer()
            );
            // #endregion

            // #region Inventory
            $('#tabInventory').append(
                document.createElement('p').textContent = 'Low priority, this can be achieved through the game cheat menu.'
            );
            // #endregion

            // #region Key Items
            $('#tabKeyItems').append(
                document.createElement('p').textContent = 'Low priority, this can be achieved through the game cheat menu.'
            );
            // #endregion

            // #endregion

            $('#content').show();
        }
    </script>

    <script type="text/html" id="test-template">
        <input data-bind="value: breasts">
    </script>
</head>



<body class="bg-secondary text-light">
    <div id="disclaimer" class="container-fluid text-center p-3">
        <h1 class="display-4">TiTS Save Editor</h1>
        <p>Edit saves at your own risk. If you break or corrupt your savefile don't blame the editor!</p>
        <p>Only JavaScript version save files are supported.</p>

        <br /><br />

        <div class="p-3">
            <h1 class="display-6">This project is still in development</h1>
            <p>
                Although this page is published and is usable, in its current state it does not represent a finished product, you can track
                its progress through <a class="link-warning" href="https://github.com/start-5/TiTS.JS-Save-Editor" target="_blank">Github</a>.
                If you have any issue, suggestion, or feature request please post them in the
                <a class="link-warning" href="https://github.com/start-5/TiTS.JS-Save-Editor/issues" target="_blank">Issues</a> tab on
                the <a class="link-warning" href="https://github.com/start-5/TiTS.JS-Save-Editor" target="_blank">Github page</a>.
            </p>
        </div>

        <button id="btnDisclaimer" type="button" class="btn btn-info mt-5">Continue</button>
    </div>

    <div id="content" class="container-fluid hidden">
        <div class="sticky-top">
            <div id="toolbarContainer">
                <div id="divToolbar" class="bg-info row g-0">
                    <div class="col p-2">
                        <div>
                            <label class="visually-hidden" for="saveName">Save File Name</label>
                            <input type="text" class="form-control form-control-sm" id="saveName" disabled />
                        </div>
                    </div>
                    <div class="col-sm-auto p-2 text-center">
                        <div id="divLoadFile" class="d-inline-block">
                            <button type="button" class="btn btn-sm btn-primary" onclick="loadFile.click()">
                                <!--<span id="aaaa" class="spinner-border spinner-border-sm" role="status" data-bind="visible: isLoading"></span>-->
                                Load file
                            </button>
                            <label class="visually-hidden" for="loadFile">Load File</label>
                            <input class="form-control" type="file" id="loadFile" hidden="hidden">
                        </div>
                        <div id="saveFileContainer" class="d-inline-block">
                            <button id="saveFile" type="button" class="btn btn-sm btn-primary" disabled>Save file</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-info text-center mx-auto px-3 py-1 expand-icon rounded-bottom position-relative opacity-50">
                <a data-bs-toggle="collapse" href="#toolbarContainer" role="button" aria-expanded="true" aria-controls="toolbarContainer"
                   class="link-light underline text-decoration-none stretched-link"><i class="fa-solid fa-arrows-up-down"></i></a>
            </div>
        </div>


        <div class="text-light pb-2 px-3 w-100">
            <label class="label-sm" for="editField-character">Character</label>
            <select id="editField-character" class="form-select form-select-sm" disabled
                    data-bind="options: chars, optionsText: 'name', value: selectedCharacter, enable: isEnabled"></select>
        </div>

        <div id="editor" class="mt-3">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="navGame" data-bs-toggle="tab" data-bs-target="#tabGame" type="button" role="tab" aria-controls="tabGame" aria-selected="true">Game</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="navStats" data-bs-toggle="tab" data-bs-target="#tabStats" type="button" role="tab" aria-controls="tabStats" aria-selected="false">Stats</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="navHead" data-bs-toggle="tab" data-bs-target="#tabHead" type="button" role="tab" aria-controls="tabHead" aria-selected="false">Head</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="navBody" data-bs-toggle="tab" data-bs-target="#tabBody" type="button" role="tab" aria-controls="tabBody" aria-selected="false">Body</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="navCrotch" data-bs-toggle="tab" data-bs-target="#tabCrotch" type="button" role="tab" aria-controls="tabCrotch" aria-selected="false">Crotch</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="navPerks" data-bs-toggle="tab" data-bs-target="#tabPerks" type="button" role="tab" aria-controls="tabPerks" aria-selected="false">Perks</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="navFlags" data-bs-toggle="tab" data-bs-target="#tabFlags" type="button" role="tab" aria-controls="tabFlags" aria-selected="false">Flags</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="navInventory" data-bs-toggle="tab" data-bs-target="#tabInventory" type="button" role="tab" aria-controls="tabInventory" aria-selected="false">Inventory</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link text-nowrap" id="navKeyItems" data-bs-toggle="tab" data-bs-target="#tabKeyItems" type="button" role="tab" aria-controls="tabKeyItems" aria-selected="false">Key Items</button>
                </li>
            </ul>
            <div class="tab-content p-2">
                <div class="tab-pane fade show active" id="tabGame" role="tabpanel" aria-labelledby="navGame"></div>
                <div class="tab-pane fade" id="tabStats" role="tabpanel" aria-labelledby="navStats"></div>
                <div class="tab-pane fade" id="tabHead" role="tabpanel" aria-labelledby="navHead"></div>
                <div class="tab-pane fade" id="tabBody" role="tabpanel" aria-labelledby="navBody"></div>
                <div class="tab-pane fade" id="tabCrotch" role="tabpanel" aria-labelledby="navCrotch"></div>
                <div class="tab-pane fade" id="tabPerks" role="tabpanel" aria-labelledby="navPerks"></div>
                <div class="tab-pane fade" id="tabFlags" role="tabpanel" aria-labelledby="navFlags"></div>
                <div class="tab-pane fade" id="tabInventory" role="tabpanel" aria-labelledby="navInventory"></div>
                <div class="tab-pane fade" id="tabKeyItems" role="tabpanel" aria-labelledby="navKeyItems"></div>
            </div>
        </div>
    </div>
</body>

</html>